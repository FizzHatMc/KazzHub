<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SkyMutations - KazzHub</title>

  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="dropdown.css">
  <script src="script.js?v=2"></script>
 <!-- <script src="data/tempMutation.js"></script> -->
</head>
<body>
<header>
  <nav style="display: flex; justify-content: space-between; align-items: center;">
    <a href="../../index.html" class="back-link">← Back to KazzHub</a>

    <button onclick="toggleHelp()" class="icon-btn" title="Show Instructions">
      ?
    </button>
  </nav>
</header>

<main>

  <div class="workspace">
    <h1>SkyMutations</h1>


    <div class="app-layout">
      <div class="sidebar-column">
        <div class="complex-dropdown card">
          <button onclick="toggleDropdown()" class="drop-btn">
            <span style="margin-right:8px;">+</span> Add Items to Queue
          </button>

          <div id="myDropdown" class="dropdown-content">
            <div class="search-container">
              <input type="text" placeholder="Search..." id="searchInput" onkeyup="filterItems()" class="search-input">
            </div>
            <div id="itemList"></div>
          </div>

          <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button onclick="getSelectedItems()" class="action-btn primary-btn" style="flex: 2;">
              Calculate
            </button>
            <button onclick="selectMutations([], true)" class="action-btn secondary-btn" style="flex: 1;">
              Clear
            </button>
          </div>

          <button onclick="selectMutations([
            { id: 'glasscorn', quantity: 1 },
            { id: 'devourer', quantity: 1 },
            { id: 'allinaloe', quantity: 1 },
            { id: 'phantomleaf', quantity: 1 },
            { id: 'timestalk', quantity: 1 },
            ]);" class="text-btn" style="margin-top: 10px; font-size: 0.8rem;">
            Load Rose Dragon Mutations
          </button>
        </div>

        <div class="card" id="itemListDisplay"></div>

        <div class="card search-card"></div>

        <div class="layout-card">
          <div class="layout-header">
            <div class="header-title">
              <span style="opacity: 0.7;">▤</span> OPTIMIZED LAYOUT
            </div>
            <div class="legend">
              <div class="legend-item">
                <span class="dot dot-open"></span> Open
              </div>
              <div class="legend-item">
                <span class="dot dot-locked"></span> Locked
              </div>
            </div>
          </div>

          <div id="layoutGrid" class="grid-container"></div>

          <div class="layout-controls" style="text-align: center; margin-top: 15px; border-top: 1px solid #333; padding-top: 15px;">
            <span style="font-size: 0.8rem; color: #a0a0a0; margin-right: 10px;">Mode:</span>
            <div class="switch-toggle">
              <input type="radio" id="mode-single" name="solver-mode" checked>
              <label for="mode-single">Single</label>

              <input type="radio" id="mode-multiple" name="solver-mode">
              <label for="mode-multiple">Multiple</label>
            </div>
          </div>

          <button onclick="resetGrid()" style="margin-top: 20px; padding: 10px;">
            Reset Layout
          </button>

          <button onclick="unlockAll()" style="margin-top: 20px; padding: 10px;">
            Unlock All
          </button>

        </div>
      </div>

      <div class="main-content" id="panZoomViewport">
        <div id="welcome-message" class="instruction-overlay">

          <button onclick="toggleHelp()" class="close-overlay-btn">&times;</button>

          <h2>Welcome to SkyMutations <br> (Help is in the Top Right Corner)</h2>
          <p>Optimize your garden layouts and track crafting recipes in 3 steps:</p>

          <div class="step-guide">
            <div class="step">
              <span class="step-num">1</span>
              <strong>Select Items</strong>
              <p>Use the dropdown on the left to choose the mutations or items you want to craft.</p>
            </div>
            <div class="step">
              <span class="step-num">2</span>
              <strong>Define Space</strong>
              <p>Click the grid cells (bottom-left) to toggle them <span style="color:#2ea043">Open</span> or <span style="color:#f85149">Locked</span> to match your garden shape.</p>
            </div>
            <div class="step">
              <span class="step-num">3</span>
              <strong>Calculate & Solve</strong>
              <p>Click "Calculate Resources", then click any item in the result list to generate the recipe tree and auto-solve the layout.</p>
            </div>
          </div>
        </div>

        <div class="app-card zoom-layer" id="tree-display"></div>
      </div>




    </div>



  </div>


</main>


<footer>
  <p>&copy; 2025 RealKazz</p>
</footer>

</body>



</html>
